{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl\n    } = _ref;\n    this._getResponse = res => {\n      return res.ok ? res.json() : Promise.reject(\"Error happened\");\n    };\n    this._baseUrl = baseUrl;\n    this._headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    this._token = \"\";\n  }\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    }).then(this._getResponse);\n  }\n  sendUserInfo(_ref2) {\n    let {\n      name,\n      about\n    } = _ref2;\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    }).then(this._getResponse);\n  }\n  getMovies() {\n    return fetch(`${this._baseUrl}`, {\n      headers: this._headers\n    }).then(this._getResponse);\n  }\n  setLike(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"PUT\",\n      headers: this._headers\n    }).then(this._getResponse);\n  }\n  deleteLike(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(this._getResponse);\n  }\n  setHeaders(token) {\n    this._headers = {\n      ...this._headers,\n      Authorization: `Bearer ${token}`\n    };\n  }\n}\nexport const api = new Api({\n  baseUrl: \"https://api.nomoreparties.co/beatfilm-movies\"\n});","map":{"version":3,"names":["Api","constructor","_ref","baseUrl","_getResponse","res","ok","json","Promise","reject","_baseUrl","_headers","_token","getUserInfo","fetch","headers","then","sendUserInfo","_ref2","name","about","method","body","JSON","stringify","getMovies","setLike","id","deleteLike","setHeaders","token","Authorization","api"],"sources":["/Users/alexander_sorokin/dev/diplom/test/movies-explorer-frontend/src/utils/MoviesApi.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl }) {\n    this._baseUrl = baseUrl;\n    this._headers = { \"Content-Type\": \"application/json\" };\n    this._token = \"\";\n  }\n\n  _getResponse = (res) => {\n    return res.ok ? res.json() : Promise.reject(\"Error happened\");\n  };\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers,\n    }).then(this._getResponse);\n  }\n\n  sendUserInfo({ name, about }) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({ name: name, about: about }),\n    }).then(this._getResponse);\n  }\n\n  getMovies() {\n    return fetch(`${this._baseUrl}`, {\n      headers: this._headers,\n    }).then(this._getResponse);\n  }\n\n  setLike(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then(this._getResponse);\n  }\n\n  deleteLike(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(this._getResponse);\n  }\n\n  setHeaders(token) {\n    this._headers = { ...this._headers, Authorization: `Bearer ${token}` };\n  }\n}\n\nexport const api = new Api({\n  baseUrl: \"https://api.nomoreparties.co/beatfilm-movies\",\n});\n"],"mappings":"AAAA,MAAMA,GAAG,CAAC;EACRC,WAAWA,CAAAC,IAAA,EAAc;IAAA,IAAb;MAAEC;IAAQ,CAAC,GAAAD,IAAA;IAAA,KAMvBE,YAAY,GAAIC,GAAG,IAAK;MACtB,OAAOA,GAAG,CAACC,EAAE,GAAGD,GAAG,CAACE,IAAI,EAAE,GAAGC,OAAO,CAACC,MAAM,CAAC,gBAAgB,CAAC;IAC/D,CAAC;IAPC,IAAI,CAACC,QAAQ,GAAGP,OAAO;IACvB,IAAI,CAACQ,QAAQ,GAAG;MAAE,cAAc,EAAE;IAAmB,CAAC;IACtD,IAAI,CAACC,MAAM,GAAG,EAAE;EAClB;EAMAC,WAAWA,CAAA,EAAG;IACZ,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACJ,QAAS,WAAU,EAAE;MACxCK,OAAO,EAAE,IAAI,CAACJ;IAChB,CAAC,CAAC,CAACK,IAAI,CAAC,IAAI,CAACZ,YAAY,CAAC;EAC5B;EAEAa,YAAYA,CAAAC,KAAA,EAAkB;IAAA,IAAjB;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAAF,KAAA;IAC1B,OAAOJ,KAAK,CAAE,GAAE,IAAI,CAACJ,QAAS,WAAU,EAAE;MACxCW,MAAM,EAAE,OAAO;MACfN,OAAO,EAAE,IAAI,CAACJ,QAAQ;MACtBW,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEL,IAAI,EAAEA,IAAI;QAAEC,KAAK,EAAEA;MAAM,CAAC;IACnD,CAAC,CAAC,CAACJ,IAAI,CAAC,IAAI,CAACZ,YAAY,CAAC;EAC5B;EAEAqB,SAASA,CAAA,EAAG;IACV,OAAOX,KAAK,CAAE,GAAE,IAAI,CAACJ,QAAS,EAAC,EAAE;MAC/BK,OAAO,EAAE,IAAI,CAACJ;IAChB,CAAC,CAAC,CAACK,IAAI,CAAC,IAAI,CAACZ,YAAY,CAAC;EAC5B;EAEAsB,OAAOA,CAACC,EAAE,EAAE;IACV,OAAOb,KAAK,CAAE,GAAE,IAAI,CAACJ,QAAS,UAASiB,EAAG,QAAO,EAAE;MACjDN,MAAM,EAAE,KAAK;MACbN,OAAO,EAAE,IAAI,CAACJ;IAChB,CAAC,CAAC,CAACK,IAAI,CAAC,IAAI,CAACZ,YAAY,CAAC;EAC5B;EAEAwB,UAAUA,CAACD,EAAE,EAAE;IACb,OAAOb,KAAK,CAAE,GAAE,IAAI,CAACJ,QAAS,UAASiB,EAAG,QAAO,EAAE;MACjDN,MAAM,EAAE,QAAQ;MAChBN,OAAO,EAAE,IAAI,CAACJ;IAChB,CAAC,CAAC,CAACK,IAAI,CAAC,IAAI,CAACZ,YAAY,CAAC;EAC5B;EAEAyB,UAAUA,CAACC,KAAK,EAAE;IAChB,IAAI,CAACnB,QAAQ,GAAG;MAAE,GAAG,IAAI,CAACA,QAAQ;MAAEoB,aAAa,EAAG,UAASD,KAAM;IAAE,CAAC;EACxE;AACF;AAEA,OAAO,MAAME,GAAG,GAAG,IAAIhC,GAAG,CAAC;EACzBG,OAAO,EAAE;AACX,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}